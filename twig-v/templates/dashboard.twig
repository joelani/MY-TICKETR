{% extends 'base.twig' %}

{% block title %}Dashboard | Ticketr{% endblock %}

{% block content %}
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="bg-gray-900 p-6 rounded-2xl shadow">
      <h2 class="text-gray-400 text-sm">Open Tickets</h2>
      <p class="text-3xl font-bold text-white mt-2">{{ stats.open_tickets|default(0) }}</p>
    </div>

    <div class="bg-gray-900 p-6 rounded-2xl shadow">
      <h2 class="text-gray-400 text-sm">Closed Tickets</h2>
      <p class="text-3xl font-bold text-white mt-2">{{ stats.closed_tickets|default(0) }}</p>
    </div>

    <div class="bg-gray-900 p-6 rounded-2xl shadow">
      <h2 class="text-gray-400 text-sm">Pending Tickets</h2>
      <p class="text-3xl font-bold text-white mt-2">{{ stats.pending_tickets|default(0) }}</p>
    </div>
  </div>

  <section class="mt-10 bg-gray-900 rounded-2xl p-6 shadow">
    <h2 class="text-lg font-semibold mb-4">Recent Tickets</h2>
    <table class="w-full text-sm text-left border-collapse">
      <thead class="border-b border-gray-800">
        <tr class="text-gray-400">
          <th class="py-2">ID</th>
          <th>Title</th>
          <th>Status</th>
          <th>Created</th>
        </tr>
      </thead>
      <tbody>
        {% for ticket in tickets %}
        <tr class="hover:bg-gray-800">
          <td class="py-2">{{ ticket.id }}</td>
          <td>{{ ticket.title }}</td>
          <td>
            <span class="px-2 py-1 rounded text-xs 
              {% if ticket.status == 'open' %}bg-green-600{% elseif ticket.status == 'closed' %}bg-red-600{% else %}bg-yellow-500{% endif %}">
              {{ ticket.status|capitalize }}
            </span>
          </td>
          <td>{{ ticket.created_at }}</td>
        </tr>
        {% else %}
        <tr><td colspan="4" class="text-center text-gray-500 py-4">No tickets found</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
{% endblock %}
